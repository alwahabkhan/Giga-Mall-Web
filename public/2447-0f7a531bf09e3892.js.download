"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2447],{2447:function(e,t,n){let r,i,o;n.d(t,{Dk:function(){return eo},$Q:function(){return ea},pc:function(){return es}});var s,a,l,c,u,d,f=n(57437),h=n(2265),p=Object.defineProperty,g=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t,n)=>g(e,"symbol"!=typeof t?t+"":t,n),b={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},E={0:8203,1:8204,2:8205,3:65279},y=[,,,,].fill(String.fromCodePoint(E[0])).join(""),m=Object.fromEntries(Object.entries(E).map(e=>e.reverse())),_=Object.fromEntries(Object.entries(b).map(e=>e.reverse())),w=`${Object.values(b).map(e=>`\\u{${e.toString(16)}}`).join("")}`,O=RegExp(`[${w}]{4,}`,"gu");!function(){if(!u){u=1;var e=function(){if(l)return a;l=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString;return a=function(n,r,i){if("[object Function]"!==t.call(r))throw TypeError("iterator must be a function");var o=n.length;if(o===+o)for(var s=0;s<o;s++)r.call(i,n[s],s,n);else for(var a in n)e.call(n,a)&&r.call(i,n[a],a,n)}}();t.get=function(e,n){for(var r=Array.isArray(n)?n:t.parse(n),i=0;i<r.length;++i){var o=r[i];if(!("object"==typeof e&&o in e))throw Error("Invalid reference token: "+o);e=e[o]}return e},t.set=function(e,n,r){var i=Array.isArray(n)?n:t.parse(n),o=i[0];if(0===i.length)throw Error("Can not set the root object");for(var s=0;s<i.length-1;++s){var a=i[s];"string"!=typeof a&&"number"!=typeof a&&(a=String(a)),"__proto__"===a||"constructor"===a||"prototype"===a||("-"===a&&Array.isArray(e)&&(a=e.length),o=i[s+1],a in e||(o.match(/^(\d+|-)$/)?e[a]=[]:e[a]={}),e=e[a])}return"-"===o&&Array.isArray(e)&&(o=e.length),e[o]=r,this},t.remove=function(e,n){var r=Array.isArray(n)?n:t.parse(n),i=r[r.length-1];if(void 0===i)throw Error('Invalid JSON pointer for remove: "'+n+'"');var o=t.get(e,r.slice(0,-1));if(Array.isArray(o)){var s=+i;if(""===i&&isNaN(s))throw Error('Invalid array index: "'+i+'"');Array.prototype.splice.call(o,s,1)}else delete o[i]},t.dict=function(e,n){var r={};return t.walk(e,function(e,t){r[t]=e},n),r},t.walk=function(n,r,i){var o=[];i=i||function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Array]"===t},function n(s){e(s,function(e,s){o.push(String(s)),i(e)?n(e):r(e,t.compile(o)),o.pop()})}(n)},t.has=function(e,n){try{t.get(e,n)}catch{return!1}return!0},t.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")},t.unescape=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t.parse=function(e){if(""===e)return[];if("/"!==e.charAt(0))throw Error("Invalid JSON pointer: "+e);return e.substring(1).split(/\//).map(t.unescape)},t.compile=function(e){return 0===e.length?"":"/"+e.map(t.escape).join("/")}}function t(e,n,r){if(3==arguments.length)return t.set(e,n,r);if(2==arguments.length)return t.get(e,n);var i=t.bind(t,e);for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o].bind(i,e));return i}}();let T=!1,I=e=>(...t)=>{T&&console[e](...t)},C={error:I("error"),warn:I("warn"),log:I("log")};function S(e,t,n){let r={...t,method:e,source:"live-preview-sdk",location:window.location.href,version:"4.6.3"};C.log("Send message",r),n.forEach(e=>{var t;null==(t=window.top)||t.postMessage(r,e)})}function A(e,t=100){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}}var D="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{},L={exports:{}};L.exports;let M=(d||(d=1,function(e,t){var n,r,i,o="__lodash_hash_undefined__",s="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",g="[object Promise]",v="[object RegExp]",b="[object Set]",E="[object String]",y="[object WeakMap]",m="[object ArrayBuffer]",_="[object DataView]",w=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[s]=T[a]=T[m]=T[l]=T[_]=T[c]=T[u]=T[d]=T[f]=T[h]=T[p]=T[v]=T[b]=T[E]=T[y]=!1;var I="object"==typeof D&&D&&D.Object===Object&&D,C="object"==typeof self&&self&&self.Object===Object&&self,S=I||C||Function("return this")(),A=t&&!t.nodeType&&t,L=A&&e&&!e.nodeType&&e,M=L&&L.exports===A,j=M&&I.process,N=function(){try{return j&&j.binding&&j.binding("util")}catch{}}(),R=N&&N.isTypedArray;function U(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function P(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var k=Array.prototype,z=Function.prototype,B=Object.prototype,x=S["__core-js_shared__"],G=z.toString,F=B.hasOwnProperty,$=(n=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",V=B.toString,Y=RegExp("^"+G.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=M?S.Buffer:void 0,q=S.Symbol,K=S.Uint8Array,J=B.propertyIsEnumerable,Z=k.splice,W=q?q.toStringTag:void 0,Q=Object.getOwnPropertySymbols,X=H?H.isBuffer:void 0,ee=(r=Object.keys,i=Object,function(e){return r(i(e))}),et=eI(S,"DataView"),en=eI(S,"Map"),er=eI(S,"Promise"),ei=eI(S,"Set"),eo=eI(S,"WeakMap"),es=eI(Object,"create"),ea=eA(et),el=eA(en),ec=eA(er),eu=eA(ei),ed=eA(eo),ef=q?q.prototype:void 0,eh=ef?ef.valueOf:void 0;function ep(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function eg(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ev(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function eb(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ev;++t<n;)this.add(e[t])}function eE(e){var t=this.__data__=new eg(e);this.size=t.size}function ey(e,t){for(var n=e.length;n--;)if(eD(e[n][0],t))return n;return -1}function em(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":W&&W in Object(e)?function(e){var t=F.call(e,W),n=e[W];try{e[W]=void 0;var r=!0}catch{}var i=V.call(e);return r&&(t?e[W]=n:delete e[W]),i}(e):V.call(e)}function e_(e){return eP(e)&&em(e)==s}function ew(e,t,n,r,i,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,d=!0,f=2&n?new eb:void 0;for(o.set(e,t),o.set(t,e);++u<a;){var h=e[u],p=t[u];if(r)var g=s?r(p,h,u,t,e,o):r(h,p,u,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}(t,function(e,t){if(!f.has(t)&&(h===e||i(h,e,n,r,o)))return f.push(t)})){d=!1;break}}else if(!(h===p||i(h,p,n,r,o))){d=!1;break}}return o.delete(e),o.delete(t),d}function eO(e){var t;return t=function(e){return null!=e&&eR(e.length)&&!eN(e)?function(e,t){var n,r=eM(e),i=!r&&eL(e),o=!r&&!i&&ej(e),s=!r&&!i&&!o&&ek(e),a=r||i||o||s,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=l.length;for(var u in e)F.call(e,u)&&!(a&&("length"==u||o&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||(n=(n=c)??9007199254740991)&&("number"==typeof u||O.test(u))&&u>-1&&u%1==0&&u<n))&&l.push(u);return l}(e):function(e){if(t=e&&e.constructor,e!==("function"==typeof t&&t.prototype||B))return ee(e);var t,n=[];for(var r in Object(e))F.call(e,r)&&"constructor"!=r&&n.push(r);return n}(e)}(e),eM(e)?t:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(t,eC(e))}function eT(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function eI(e,t){var n=null==e?void 0:e[t];return!(!eU(n)||$&&$ in n)&&(eN(n)?Y:w).test(eA(n))?n:void 0}ep.prototype.clear=function(){this.__data__=es?es(null):{},this.size=0},ep.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ep.prototype.get=function(e){var t=this.__data__;if(es){var n=t[e];return n===o?void 0:n}return F.call(t,e)?t[e]:void 0},ep.prototype.has=function(e){var t=this.__data__;return es?void 0!==t[e]:F.call(t,e)},ep.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=es&&void 0===t?o:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,n=ey(t,e);return!(n<0)&&(n==t.length-1?t.pop():Z.call(t,n,1),--this.size,!0)},eg.prototype.get=function(e){var t=this.__data__,n=ey(t,e);return n<0?void 0:t[n][1]},eg.prototype.has=function(e){return ey(this.__data__,e)>-1},eg.prototype.set=function(e,t){var n=this.__data__,r=ey(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ev.prototype.clear=function(){this.size=0,this.__data__={hash:new ep,map:new(en||eg),string:new ep}},ev.prototype.delete=function(e){var t=eT(this,e).delete(e);return this.size-=t?1:0,t},ev.prototype.get=function(e){return eT(this,e).get(e)},ev.prototype.has=function(e){return eT(this,e).has(e)},ev.prototype.set=function(e,t){var n=eT(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},eb.prototype.add=eb.prototype.push=function(e){return this.__data__.set(e,o),this},eb.prototype.has=function(e){return this.__data__.has(e)},eE.prototype.clear=function(){this.__data__=new eg,this.size=0},eE.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},eE.prototype.get=function(e){return this.__data__.get(e)},eE.prototype.has=function(e){return this.__data__.has(e)},eE.prototype.set=function(e,t){var n=this.__data__;if(n instanceof eg){var r=n.__data__;if(!en||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ev(r)}return n.set(e,t),this.size=n.size,this};var eC=Q?function(e){return null==e?[]:function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}(Q(e=Object(e)),function(t){return J.call(e,t)})}:function(){return[]},eS=em;function eA(e){if(null!=e){try{return G.call(e)}catch{}try{return e+""}catch{}}return""}function eD(e,t){return e===t||e!=e&&t!=t}(et&&eS(new et(new ArrayBuffer(1)))!=_||en&&eS(new en)!=f||er&&eS(er.resolve())!=g||ei&&eS(new ei)!=b||eo&&eS(new eo)!=y)&&(eS=function(e){var t=em(e),n=t==p?e.constructor:void 0,r=n?eA(n):"";if(r)switch(r){case ea:return _;case el:return f;case ec:return g;case eu:return b;case ed:return y}return t});var eL=e_(function(){return arguments}())?e_:function(e){return eP(e)&&F.call(e,"callee")&&!J.call(e,"callee")},eM=Array.isArray,ej=X||function(){return!1};function eN(e){if(!eU(e))return!1;var t=em(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eR(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function eU(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eP(e){return null!=e&&"object"==typeof e}var ek=R?function(e){return R(e)}:function(e){return eP(e)&&eR(e.length)&&!!T[em(e)]};e.exports=function(e,t){return function e(t,n,r,i,o){return t===n||(null!=t&&null!=n&&(eP(t)||eP(n))?function(e,t,n,r,i,o){var d=eM(e),g=eM(t),y=d?a:eS(e),w=g?a:eS(t);y=y==s?p:y,w=w==s?p:w;var O=y==p,T=w==p,I=y==w;if(I&&ej(e)){if(!ej(t))return!1;d=!0,O=!1}if(I&&!O)return o||(o=new eE),d||ek(e)?ew(e,t,n,r,i,o):function(e,t,n,r,i,o,s){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case m:return!(e.byteLength!=t.byteLength||!o(new K(e),new K(t)));case l:case c:case h:return eD(+e,+t);case u:return e.name==t.name&&e.message==t.message;case v:case E:return e==t+"";case f:var a=U;case b:var d=1&r;if(a||(a=P),e.size!=t.size&&!d)break;var p=s.get(e);if(p)return p==t;r|=2,s.set(e,t);var g=ew(a(e),a(t),r,i,o,s);return s.delete(e),g;case"[object Symbol]":if(eh)return eh.call(e)==eh.call(t)}return!1}(e,t,y,n,r,i,o);if(!(1&n)){var C=O&&F.call(e,"__wrapped__"),S=T&&F.call(t,"__wrapped__");if(C||S){var A=C?e.value():e,D=S?t.value():t;return o||(o=new eE),i(A,D,n,r,o)}}return!!I&&(o||(o=new eE),function(e,t,n,r,i,o){var s=1&n,a=eO(e),l=a.length;if(l!=eO(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:F.call(t,u)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var h=s;++c<l;){var p=e[u=a[c]],g=t[u];if(r)var v=s?r(g,p,u,t,e,o):r(p,g,u,e,t,o);if(!(void 0===v?p===g||i(p,g,n,r,o):v)){f=!1;break}h||(h="constructor"==u)}if(f&&!h){var b=e.constructor,E=t.constructor;b!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E)&&(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o))}(t,n,r,i,e,o):t!=t&&n!=n)}(e,t)}}(L,L.exports)),(s=L.exports)&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default"))?s.default:s;var j=((r=j||{}).FIELD_ID="data-contentful-field-id",r.ENTRY_ID="data-contentful-entry-id",r.ASSET_ID="data-contentful-asset-id",r.LOCALE="data-contentful-locale",r.SPACE="data-contentful-space",r.ENVIRONMENT="data-contentful-environment",r),N=((i=N||{}).MOUSE_MOVE="MOUSE_MOVE",i.SCROLL_START="SCROLL_START",i.SCROLL_END="SCROLL_END",i.RESIZE_START="RESIZE_START",i.RESIZE_END="RESIZE_END",i.TAGGED_ELEMENTS="TAGGED_ELEMENTS",i.INSPECTOR_MODE_CHANGED="INSPECTOR_MODE_CHANGED",i),R={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},U={0:8203,1:8204,2:8205,3:65279};[,,,,].fill(String.fromCodePoint(U[0])).join(""),Object.fromEntries(Object.entries(U).map(e=>e.reverse())),Object.fromEntries(Object.entries(R).map(e=>e.reverse()));var P=`${Object.values(R).map(e=>`\\u{${e.toString(16)}}`).join("")}`,k=RegExp(`[${P}]{4,}`,"gu");let z=e=>!!e&&e.nodeType===Node.ELEMENT_NODE&&!(!e.hasAttribute(j.FIELD_ID)||!e.hasAttribute(j.ENTRY_ID)&&!e.hasAttribute(j.ASSET_ID));function B(e,t){return e.href===t.href}function x({root:e=window.document,options:t}){var n,r;let i;let o=[...t.ignoreManuallyTaggedElements?[]:e.querySelectorAll(`[${j.ASSET_ID}][${j.FIELD_ID}], [${j.ENTRY_ID}][${j.FIELD_ID}]`)].map(e=>({element:e,attributes:function(e,t){if(!z(e))return null;let n={fieldId:e.getAttribute(j.FIELD_ID),locale:e.getAttribute(j.LOCALE)??t.locale,environment:e.getAttribute(j.ENVIRONMENT)??t.environment,space:e.getAttribute(j.SPACE)??t.space,manuallyTagged:!0};if(!n.fieldId)return C.warn("Element is missing field ID attribute and cannot be tagged",{id:e.getAttribute(j.ENTRY_ID)??e.getAttribute(j.ASSET_ID),sharedProps:n}),null;let r=e.getAttribute(j.ENTRY_ID);if(r)return{...n,entryId:r};let i=e.getAttribute(j.ASSET_ID);return i?{...n,assetId:i}:null}(e,t)})).filter(({attributes:e})=>null!==e),s=[];for(let{node:t,text:r}of(n="body"in e?e.body:e,i=[],"function"==typeof n.matches&&n.matches("*")&&(i=[n]),[...i,...Array.from(n.querySelectorAll("*:not(script,style,meta,title)"))].map(e=>({node:e,text:e.matches("input[type=submit], input[type=button], input[type=reset]")?e.value:e.matches("img, video")?e.alt:Array.from(e.childNodes).filter(e=>e.nodeType===Node.TEXT_NODE&&!!e.textContent).map(e=>e.textContent).join("")})).filter(({text:e})=>!!(e&&e.match(k))))){let e=function(e){let t=e.match(O);if(t)return function(e,t=!1){let n=Array.from(e);if(n.length%2==0){if(n.length%4||!e.startsWith(y))return function(e,t){var n;let r=[];for(let t=.5*e.length;t--;){let n=`${_[e[2*t].codePointAt(0)]}${_[e[2*t+1].codePointAt(0)]}`;r.unshift(String.fromCharCode(parseInt(n,16)))}let i=[],o=[r.join("")],s=10;for(;o.length;){let e=o.shift();try{if(i.push(JSON.parse(e)),t)break}catch(r){if(!s--)throw r;let t=+(null==(n=r.message.match(/\sposition\s(\d+)$/))?void 0:n[1]);if(!t)throw r;o.unshift(e.substring(0,t),e.substring(t))}}return i}(n,t)}else throw Error("Encoded data has invalid length");let r=[];for(let e=.25*n.length;e--;){let t=n.slice(4*e,4*e+4).map(e=>m[e.codePointAt(0)]).join("");r.unshift(String.fromCharCode(parseInt(t,4)))}if(t){r.shift();let e=r.indexOf("\0");return -1===e&&(e=r.length),[JSON.parse(r.slice(0,e).join(""))]}return r.join("").split("\0").filter(Boolean).map(e=>JSON.parse(e))}(t[0],!0)[0]}(r);if(!e||!e.origin.includes("contentful.com")){C.warn("Element has missing or invalid ContentSourceMap, please check if you have correctly enabled ContentSourceMaps and that the element's data originates from Contentful",{node:t,sourceMap:e});continue}if(!(function(e,t){for(let n of t)if(n.element===e||n.element.contains(e))return!0;return!1}(t,o)||s.some(n=>n.element.contains(t)&&B(n.sourceMap,e)))){if(t.matches("img")){let n=t.closest("figure")||t.closest("picture")||t;s.push({element:n,sourceMap:e});continue}s.push({element:t,sourceMap:e})}}let a=s.filter((e,t)=>s.findIndex(t=>!(!B(e.sourceMap,t.sourceMap)||e.element!==t.element))===t);for(let{element:e,sourceMap:t}of a){let n=null;if(t.href){let r=function(e){try{let t,n;let r=new URL(e),i=r.searchParams.get("focusedField"),o=r.searchParams.get("focusedLocale"),s=r.pathname.split("/").filter(Boolean),a=s.indexOf("spaces"),l=s.indexOf("environments"),c=-1!==a?s[a+1]:void 0,u=-1!==l?s[l+1]:void 0,d=s.indexOf("entries"),f=s.indexOf("assets");return -1!==d?(t="Entry",n=s[d+1]):-1!==f&&(t="Asset",n=s[f+1]),t&&n?i?o?c&&u?{entityId:n,entityType:t,fieldId:i,locale:o,space:c,environment:u}:(console.warn("Missing space or environment in href path",{href:e}),null):(console.warn("Missing focusedLocale query parameter in href",{href:e}),null):(console.warn("Missing focusedField query parameter in href",{href:e}),null):(console.warn("Unable to determine entityType or entityId from href",{href:e}),null)}catch(t){return console.warn("Invalid href URL",{href:e,error:t}),null}}(t.href);if(!r)continue;if("Asset"===r.entityType)n={fieldId:r.fieldId,locale:r.locale,space:r.space,environment:r.environment,assetId:r.entityId};else if("Entry"===r.entityType)n={fieldId:r.fieldId,locale:r.locale,space:r.space,environment:r.environment,entryId:r.entityId};else{C.warn("Unknown entityType",{element:e,sourceMap:t});continue}}else if(t.contentful&&(r=t.contentful)&&"string"==typeof r.entity&&"string"==typeof r.field&&"string"==typeof r.locale&&"string"==typeof r.space&&"string"==typeof r.environment&&("Asset"===r.entityType||"Entry"===r.entityType)){let r=t.contentful;if(!r.entity||!r.field||!r.locale||!r.space||!r.environment){C.warn("Element has missing information in their ContentSourceMap, please check if you have restricted the platform for the encoding. (Missing parameters in `contentful`)",{element:e,sourceMap:t});continue}let i={fieldId:r.field,locale:r.locale,space:r.space,environment:r.environment};if("Asset"===r.entityType)i.assetId=r.entity,n=i;else if("Entry"===r.entityType)i.entryId=r.entity,n=i;else{C.warn("Unknown entityType in contentful data",{element:e,sourceMap:t});continue}}else{C.warn("Element has neither href nor contentful data in their ContentSourceMap, unable to extract attributes.",{element:e,sourceMap:t});continue}o.push({element:e,attributes:n})}let l=o.filter(({attributes:e})=>(null==e?void 0:e.manuallyTagged)===!1||!(null!=e&&e.manuallyTagged)).length;return{taggedElements:o,manuallyTaggedCount:o.length-l,automaticallyTaggedCount:l,autoTaggedElements:a}}function G({options:e}){return[...new Set(x({options:e}).taggedElements.map(e=>e.attributes&&"entryId"in e.attributes?e.attributes.entryId:null).filter(Boolean))]}let F=(e,t,n=window.document)=>{let{top:r,right:i,bottom:o,left:s}=t,a=n.elementFromPoint(s+1,r+1),l=n.elementFromPoint(i-1,r+1),c=n.elementFromPoint(s+1,o-1),u=n.elementFromPoint(i-1,o-1);return!(a===e&&l===e&&c===e&&u===e)},$=(e,t=window.document)=>e.map(e=>({...e,isVisible:e.element.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}),isCoveredByOtherElement:F(e.element,e.coordinates,t)})),V=e=>e.map(({element:e,attributes:t})=>({element:e,coordinates:e.getBoundingClientRect(),attributes:t})),Y=(e,t=window.document)=>$(V(e),t);class H{constructor(e){v(this,"delay",300),v(this,"isScrolling",!1),v(this,"scrollTimeout"),v(this,"isResizing",!1),v(this,"resizeTimeout"),v(this,"hoveredElement"),v(this,"taggedElements",[]),v(this,"manuallyTaggedCount",0),v(this,"automaticallyTaggedCount",0),v(this,"intersectionObserver"),v(this,"observersCB",[]),v(this,"cleanupCB",[]),v(this,"init",()=>{this.cleanupCB=[this.addScrollListener(),this.addMutationListener(document.body),this.addResizeListener(),this.addHoverListener()],this.updateElements()}),v(this,"cleanup",()=>{this.observersCB.forEach(e=>e()),this.cleanupCB.forEach(e=>e())}),v(this,"receiveMessage",e=>{if(e.method===N.INSPECTOR_MODE_CHANGED){let{isInspectorActive:t}=e;t?this.init():this.cleanup()}}),v(this,"observe",e=>{this.intersectionObserver.observe(e);let t=this.addMutationListener(e);this.observersCB.push(t,()=>this.intersectionObserver.unobserve(e))}),v(this,"addScrollListener",()=>{let{targetOrigin:e}=this.options,t=()=>{this.isScrolling||(this.isScrolling=!0,S(N.SCROLL_START,{},e)),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1,S(N.SCROLL_END,{},e),this.updateElements()},this.delay)},n={capture:!0,passive:!0};return window.addEventListener("scroll",t,n),()=>window.removeEventListener("scroll",t,n)}),v(this,"addMutationListener",e=>{let t=new MutationObserver(()=>{this.updateElements()});return t.observe(e,{characterData:!0,attributes:!0,attributeFilter:[j.ENTRY_ID,j.FIELD_ID,j.LOCALE,j.SPACE,j.ENVIRONMENT,"class","style"],childList:!0,subtree:!0}),()=>t.disconnect()}),v(this,"addResizeListener",()=>{let{targetOrigin:e}=this.options,t=new ResizeObserver(()=>{this.isResizing||(this.isResizing=!0,S(N.RESIZE_START,{},e)),this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.isResizing=!1,S(N.RESIZE_END,{},e),this.updateElements()},this.delay)});return t.observe(document.body),()=>t.disconnect()}),v(this,"addHoverListener",()=>{let e=A(e=>{let t;for(let n of e){let e=n;if("BODY"===e.nodeName)break;let r=this.taggedElements.find(t=>t.element===e);if(r){t=r;break}}this.hoveredElement=null==t?void 0:t.element,this.updateElements()},this.delay),t=t=>{e(t.composedPath())};return window.addEventListener("mouseover",t,{passive:!0}),()=>window.removeEventListener("mouseover",t)}),v(this,"sendTaggedElements",()=>{S(N.TAGGED_ELEMENTS,{elements:this.taggedElements.map(e=>({coordinates:e.coordinates,isVisible:!!e.isVisible,attributes:e.attributes,isHovered:this.hoveredElement===e.element,isCoveredByOtherElement:!!e.isCoveredByOtherElement})),automaticallyTaggedCount:this.automaticallyTaggedCount,manuallyTaggedCount:this.manuallyTaggedCount},this.options.targetOrigin)}),v(this,"updateElements",()=>{let{taggedElements:e,manuallyTaggedCount:t,automaticallyTaggedCount:n}=x({options:this.options}),r=Y(e);M(r,this.taggedElements)||(this.observersCB.forEach(e=>e()),this.observersCB=[],this.taggedElements=r,e.forEach(({element:e})=>this.observe(e)),this.manuallyTaggedCount=t,this.automaticallyTaggedCount=n)}),this.options=e,this.intersectionObserver=new IntersectionObserver(e=>{let t=this.taggedElements;for(let n of e)if(n.isIntersecting)for(let e of t)e.element===n.target&&(e.coordinates=n.intersectionRect,e.isVisible=n.target.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}));this.taggedElements=t,this.sendTaggedElements()},{threshold:.15})}}let{parse:q,stringify:K}=JSON,J=String,Z=(e,t)=>t,W=(e,t,n)=>{let r=J(t.push(n)-1);return e.set(n,r),r},Q=(e,t,n)=>{let r=new Map,i=[],o=[],s=+W(r,i,Z.call({"":e},"",e)),a=!s;for(;s<i.length;)a=!0,o[s]=K(i[s++],l,n);return"["+o.join(",")+"]";function l(e,t){if(a)return a=!a,t;let n=Z.call(this,e,t);switch(typeof n){case"object":if(null===n)break;case"string":return r.get(n)||W(r,i,n)}return n}};var X=((o=X||{}).CONNECTED="CONNECTED",o.DISCONNECTED="DISCONNECTED",o.ERROR="ERROR",o.TAGGED_FIELD_CLICKED="TAGGED_FIELD_CLICKED",o.URL_CHANGED="URL_CHANGED",o.SUBSCRIBED="SUBSCRIBED",o.UNSUBSCRIBED="UNSUBSCRIBED",o.ENTRY_UPDATED="ENTRY_UPDATED",o.ENTRY_SAVED="ENTRY_SAVED",o.DEBUG_MODE_ENABLED="DEBUG_MODE_ENABLED",o);class ee{constructor({locale:e,targetOrigin:t}){v(this,"subscriptions",new Map),v(this,"defaultLocale"),v(this,"sendMessage"),this.defaultLocale=e,this.sendMessage=(e,n)=>S(e,n,t)}async receiveMessage(e){if(e.method===X.ENTRY_UPDATED){let{data:t,subscriptionId:n}=e,r=this.subscriptions.get(n);r?(r.callback(t),r.data=t,this.subscriptions.set(n,r)):C.error("Received an update for an unknown subscription",{subscriptionId:n,data:t,subscriptions:this.subscriptions})}}subscribe(e){let t=`${performance.now()}-${Math.random().toString(36).slice(2)}`,n=e.locale??this.defaultLocale;this.subscriptions.set(t,{...e});let r={locale:n,event:"edit",id:t,config:Q(e)};return this.sendMessage(X.SUBSCRIBED,r),()=>{this.sendMessage(X.UNSUBSCRIBED,r),this.subscriptions.delete(t)}}}class et{constructor({locale:e,options:t}){v(this,"locale"),v(this,"options"),v(this,"subscription"),this.locale=e,this.options=t}subscribe(e){return this.subscription&&C.log("There is already a subscription for the save event, the existing one will be replaced."),this.subscription=e,()=>{this.subscription=void 0}}receiveMessage(e){if(e.method===X.ENTRY_SAVED&&this.subscription){let{entity:t}=e;G({options:this.options}).includes(t.sys.id)&&this.subscription(t)}}}let en=["https://app.contentful.com","https://app.eu.contentful.com","http://localhost:3001"],er=class e{static init(t){var n;if("object"!=typeof t||!(null!=t&&t.locale))throw Error("Init function has to be called with a locale configuration (for example: `ContentfulLivePreview.init({ locale: 'en-US'})`)");let{debugMode:r,enableInspectorMode:i,enableLiveUpdates:o,locale:s,environment:a,space:l,targetOrigin:c}=t;if("u">typeof window){if(!function(){var e;try{return(null==(e=window.top)?void 0:e.location.href)!==window.location.href}catch{return!0}}())return this.liveUpdatesEnabled=!1,Promise.resolve(null);if(r&&(T=r),"boolean"==typeof i&&(this.inspectorModeEnabled=i),"boolean"==typeof o&&(this.liveUpdatesEnabled=o),this.locale=s,this.space=l,this.environment=a,this.initTargetOrigin(c),this.initialized)return C.log("You have already initialized the Live Preview SDK."),Promise.resolve(e.inspectorMode);this.inspectorModeEnabled&&(this.inspectorMode=new H({locale:s,space:l,environment:a,targetOrigin:this.targetOrigin,ignoreManuallyTaggedElements:null==(n=t.experimental)?void 0:n.ignoreManuallyTaggedElements})),this.liveUpdatesEnabled&&(this.liveUpdates=new ee({locale:s,targetOrigin:this.targetOrigin}),this.saveEvent=new et({locale:s,options:{locale:this.locale,space:this.space,environment:this.environment,targetOrigin:this.targetOrigin}})),window.addEventListener("message",e=>{var t,n,r;if("object"==typeof e.data&&e.data&&"source"in e.data&&"live-preview-editor"===e.data.source){if(C.log("Received message",e.data),e.data.method===X.DEBUG_MODE_ENABLED){T=!0;return}this.inspectorModeEnabled&&(null==(t=this.inspectorMode)||t.receiveMessage(e.data)),this.liveUpdatesEnabled&&(null==(n=this.liveUpdates)||n.receiveMessage(e.data),null==(r=this.saveEvent)||r.receiveMessage(e.data))}}),function(e,t=500){let n=window.location.href;setInterval(()=>{let t=window.location.href;t!==n&&(n=t,e(t))},t)}(()=>{S(X.URL_CHANGED,{action:X.URL_CHANGED,taggedElementCount:document.querySelectorAll(`[${j.ENTRY_ID}]`).length},this.targetOrigin)});let{taggedElements:u,manuallyTaggedCount:d,automaticallyTaggedCount:f}=this.inspectorModeEnabled?x({options:{locale:this.locale,space:this.space,environment:this.environment}}):{taggedElements:[],manuallyTaggedCount:0,automaticallyTaggedCount:0},h=u.length;return S(X.CONNECTED,{action:X.CONNECTED,connected:!0,tags:h,taggedElementCount:h,locale:this.locale,isInspectorEnabled:this.inspectorModeEnabled,isLiveUpdatesEnabled:this.liveUpdatesEnabled,manuallyTaggedElementCount:d,automaticallyTaggedElementCount:f},this.targetOrigin),this.initialized=!0,Promise.resolve(e.inspectorMode)}}static initTargetOrigin(e){if(e)this.targetOrigin=Array.isArray(e)?e:[e];else{let e=window.location.ancestorOrigins,t=e?en.find(t=>e.contains(t)):en.find(e=>document.referrer.includes(e));if(!t)throw Error("The current origin is not supported. Please provide a targetOrigin in the live preview configuration.");this.targetOrigin=[t]}}static subscribe(e,t){if(!this.liveUpdatesEnabled)return()=>{};let n="string"==typeof e?e:"edit",r="object"==typeof e?e:t;if("save"===n){if(!this.saveEvent)throw Error("Save event is not initialized, please call `ContentfulLivePreview.init()` first.");return this.saveEvent.subscribe(r.callback)}if(!this.liveUpdates)throw Error("Live updates are not initialized, please call `ContentfulLivePreview.init()` first.");return this.liveUpdates.subscribe(r)}static getProps(e){let{fieldId:t,locale:n,environment:r,space:i}=e;if(!this.inspectorModeEnabled)return null;if(t){let o={...n?{[j.LOCALE]:n}:{},...r?{[j.ENVIRONMENT]:r}:{},...i?{[j.SPACE]:i}:{},[j.FIELD_ID]:t};if(n&&(o[j.LOCALE]=n),void 0!==e.assetId)return{...o,[j.ASSET_ID]:e.assetId};if(void 0!==e.entryId)return{...o,[j.ENTRY_ID]:e.entryId}}return C.warn("Missing property for inspector mode",{...e}),null}static toggleInspectorMode(){return this.inspectorModeEnabled=!this.inspectorModeEnabled,this.inspectorModeEnabled}static toggleLiveUpdatesMode(){return this.liveUpdatesEnabled=!this.liveUpdatesEnabled,this.liveUpdatesEnabled}static openEntryInEditor(e){var t,n,r,i;let o={locale:this.locale,environment:this.environment,space:this.space};if(void 0!==e.assetId&&e.fieldId){t={...o,...e},n=this.targetOrigin,S("TAGGED_FIELD_CLICKED",{action:"TAGGED_FIELD_CLICKED",...t},n);return}if(void 0!==e.entryId&&e.fieldId){r={...o,...e},i=this.targetOrigin,S("TAGGED_FIELD_CLICKED",{action:"TAGGED_FIELD_CLICKED",...r},i);return}C.error("Please provide field id and entry/asset id to openEntryInEditor.",{...e})}static getEntryList(){return G({options:{locale:this.locale,space:this.space,environment:this.environment}})}};v(er,"initialized",!1),v(er,"inspectorMode",null),v(er,"liveUpdates",null),v(er,"saveEvent",null),v(er,"inspectorModeEnabled",!0),v(er,"liveUpdatesEnabled",!0),v(er,"locale"),v(er,"space"),v(er,"environment"),v(er,"sendMessage"),v(er,"targetOrigin");let ei=(0,h.createContext)(null);function eo({children:e,locale:t,space:n,environment:r,debugMode:i=!1,enableInspectorMode:o=!0,enableLiveUpdates:s=!0,targetOrigin:a,experimental:l}){if(!t)throw Error('ContentfulLivePreviewProvider has to be called with a locale property (for example: `<ContentfulLivePreviewProvider locale="en-US">{children}</ContentfulLivePreviewProvider>`');er.init({locale:t,space:n,environment:r,debugMode:i,enableInspectorMode:o,enableLiveUpdates:s,targetOrigin:a,experimental:l});let c=(0,h.useMemo)(()=>({locale:t,space:n,environment:r,debugMode:i,enableInspectorMode:o,enableLiveUpdates:s,targetOrigin:a}),[t,n,r,i,o,s,a]);return(0,f.jsx)(ei.Provider,{value:c,children:e})}function es(e,t,n=!1){var r,i;let[o,s]=(0,h.useState)({data:e,version:1}),a=(0,h.useRef)(e),l=(0,h.useRef)(A(s)),c=(0,h.useContext)(ei),u="object"==typeof t?t:{locale:t,skip:n},d=(0,h.useMemo)(()=>(!c||!!c.enableLiveUpdates)&&!u.skip&&!!(Array.isArray(e)&&e.length||e&&"object"==typeof e&&Object.keys(e).length),[c,u.skip,e]);return r=()=>{if(a.current!==e&&(s({data:e,version:1}),a.current=e),d)return er.subscribe("edit",{data:e,locale:u.locale,query:u.query,callback:e=>{l.current(t=>({data:e,version:t.version+1}))}})},i=[e,d,u.locale,u.query],(0,h.useEffect)(r,function(e){let t=(0,h.useRef)(e),n=(0,h.useRef)(0);return M(e,t.current)||(t.current=e,n.current+=1),(0,h.useMemo)(()=>t.current,[n.current])}(i)),o.data}function ea(e){let t=(0,h.useContext)(ei);return(0,h.useCallback)(n=>null!=t&&t.enableInspectorMode?er.getProps({...e,...n}):null,[null==t?void 0:t.enableInspectorMode,e])}}}]);